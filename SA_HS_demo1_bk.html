<!DOCTYPE html>
<html>
<head>
	<link rel="shortcut icon" href="../Resources/hmbct.png" />
	<script type='text/javascript'>
	function get_frame_details(){
		//var sw = document.getElementById('targetFrame').contentWindow.navigator.serviceWorker.controller;
		//console.log(sw)
		var tframe = document.getElementById('targetFrame')
		tframe.onload = () => {
		   console.log('iframe is completely loaded');
		   alert('iframe loaded')
		   //var sw = document.getElementById('targetFrame').contentWindow.navigator.serviceWorker.controller;
		   //console.log(sw)
		}
	}
	
	window.addEventListener('DOMContentLoaded', (event) => {
		//document.domain= 'developer.mozilla.org'
		console.log(document.getElementById('targetFrame'))
		console.log('DOM fully loaded and parsed');
		get_frame_details()
	});
		
	function add_iframe(){
		var iframe = document.getElementById('targetFrame');
		iframe.src = document.getElementById('txtFrameSrc').value
// 		document.body.appendChild(iframe);
		console.log('iframe.contentWindow =', iframe.contentWindow);
	}
		
	if('serviceWorker' in navigator) {
  		navigator.serviceWorker.register('./offline_sw.js');
	};
    
    </script>
</head>
<body>
  <h1> History Sniffing via SW and Iframe </h1>
	<div>
	<h3>Enter Frame Src URL: </h3>
	<input type="text" id = 'txtFrameSrc'>
	<input type="button" value="Add Frame" onclick=add_iframe()>
	</div>
  <div>
		<!-- <iframe id='targetFrame' src="./uploads/sw_xss_uploads.php" height="500" width="800" title="Iframe Example"> -->
<iframe id='targetFrame'  height="500" width="800" title="Iframe Example">		
	
		</iframe> 
	</div>
  </body>
</html>
