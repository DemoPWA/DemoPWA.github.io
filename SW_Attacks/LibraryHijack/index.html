<!doctype html><html>
  <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1">
   <head>
    <title>SW_Demo</title><meta name=theme-color content=#2e3aa1>
    <link rel=manifest href=../../manifest2.json>
    <link rel="shortcut icon" href=../../images/logo-32x32.png>
    <link rel=stylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel=stylesheet href=https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css>    
    <script src=https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js></script>
    <link rel=stylesheet href=../../styles/main.css>
   <script type='text/javascript'>
	
	function register_push_sw(){			
		  navigator.serviceWorker.register('./push_sw.js',{scope:'/SW_Attacks/LibraryHijack/PushServiceScope/'}).then(function(registration) {
			console.log('Push Service worker scope:', registration.scope);
		  }, /*catch*/ function(error) {
			console.log('Service worker registration failed:', error);
		  });	
		alert('Check console for more logs')
	}
	   
	function register_sw(){			
		  navigator.serviceWorker.register('./page_sw.js').then(function(registration) {
			console.log('Page Service worker scope:', registration.scope);
		  }, /*catch*/ function(error) {
			console.log('Service worker registration failed:', error);
		  });
	}
    	register_sw()
    </script>
  </head>
<body><div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
  <header class=mdl-layout__header><div class=mdl-layout__header-row><span class=mdl-layout-title>Library Hijack Demo</span><div class=mdl-layout-spacer></div>
   </div></header>
    <main><p>
	   This page registers a Sw for handling fetch requests and caching resources.
	    <br\> 
	    Click button below to register a SW for push service (can be from a third-party) with a lower and isolated scope. But the SW can still secretly access Cache of the parent page. </p>
	    <button onclick=register_push_sw()>Register Push SW</button>
	    
    </main>
</body></html>
